(()=>{"use strict";var t,e={7279:(t,e,i)=>{i.r(e)},9986:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Enemy=void 0;const s=i(8687);class r extends s.Sprite{constructor(t){super(),this.isProjectile=!0,this.app=t.app,this.radius=t.radius,this.vx=t.vx,this.vy=t.vy,this.setup(t)}static numColorToArray(t){const e=t.toString(16).padStart(6,"0");return[Number.parseInt(e[0]+e[1],16),Number.parseInt(e[2]+e[3],16),Number.parseInt(e[4]+e[5],16)]}static toHex(t){let e=t.toString(16);return 1===e.length&&(e="0"+e),e}static interpolateColors(t){const e=1-t,[i,s,o]=this.maxColorArray,[n,a,h]=this.minColorArray,l=Math.round(i*t+n*e),d=Math.round(s*t+a*e),c=Math.round(o*t+h*e);return r.toHex(l)+r.toHex(d)+r.toHex(c)}setup(t){let e=r.textureCache;if(null==e){const i=new s.Graphics;i.beginFill(16777215),i.drawCircle(0,0,this.radius),i.endFill(),i.cacheAsBitmap=!0,e=t.app.renderer.generateTexture(i),r.textureCache=e}this.texture=e,this.scale.set(2*t.radius/e.width,2*t.radius/e.height);const i=r.interpolateColors(Math.random());this.tint=Number.parseInt(i,16)}update(){this.x=this.x+this.vx,this.y=this.y+this.vy}isOutOfViewport({left:t,top:e,right:i,bottom:s}){const r=this.x-this.radius,o=this.y-this.radius,n=this.x+this.radius,a=this.y+this.radius;return n<t||r>i||a<e||o>s}}r.minColor=16711680,r.minColorArray=r.numColorToArray(r.minColor),r.maxColor=65280,r.maxColorArray=r.numColorToArray(r.maxColor),e.Enemy=r},9060:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Particle=void 0;const s=i(8687);class r extends s.Sprite{constructor(t){super(),this.isProjectile=!0,this.app=t.app,this.radius=t.radius,this.vx=t.vx,this.vy=t.vy,this.setup(t)}setup(t){let e=r.textureCache;if(null==e){const i=new s.Graphics;i.beginFill(16777215),i.drawCircle(0,0,this.radius),i.endFill(),i.cacheAsBitmap=!0,e=t.app.renderer.generateTexture(i),r.textureCache=e}this.texture=e,this.scale.set(2*t.radius/e.width,2*t.radius/e.height),this.tint=t.fillColor}update(){this.x=this.x+this.vx,this.y=this.y+this.vy,this.alpha=this.alpha-.01,this.alpha<0&&(this.alpha=0)}isOutOfViewport({left:t,top:e,right:i,bottom:s}){const r=this.x-this.radius,o=this.y-this.radius,n=this.x+this.radius,a=this.y+this.radius;return n<t||r>i||a<e||o>s}}e.Particle=r},4778:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;const s=i(8687);class r extends s.Graphics{constructor(t){super(),this.radius=t.radius,this.damage=t.damage,this.health=t.health,this.fillColor=t.fillColor,this.draw()}draw(){this.beginFill(this.fillColor),this.drawCircle(0,0,this.radius),this.endFill()}}e.Player=r},7067:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectileTrail=e.Projectile=void 0;const s=i(8687),r=i(5473);class o extends s.Sprite{constructor(t){super(),this.isProjectile=!0,this.id=t.id,this.app=t.app,this.radius=t.radius,this.vx=t.vx,this.vy=t.vy,this.fillColor=t.fillColor,this.setup(t)}setup(t){let e=o.textureCache;if(null==e){const i=new s.Graphics;i.beginFill(this.fillColor),i.drawCircle(0,0,this.radius),i.endFill(),i.cacheAsBitmap=!0,e=t.app.renderer.generateTexture(i),o.textureCache=e}this.texture=e}update(){this.x=this.x+this.vx,this.y=this.y+this.vy}isOutOfViewport({left:t,top:e,right:i,bottom:s}){const r=this.x-this.radius,o=this.y-this.radius,n=this.x+this.radius,a=this.y+this.radius;return n<t||r>i||a<e||o>s}BuildTrail(){const t=3*Math.floor(this.radius);return Array.from({length:t},((e,i)=>new n({mainId:this.id,mainX:this.x,mainY:this.y,texture:this.texture,radius:this.radius-(this.radius-1)*i/t,vx:this.vx,vy:this.vy,dt:.5-.49*i/t,alpha:.9-.8*(i+1)/t})))}}e.Projectile=o;class n extends s.Sprite{constructor(t){var e,i,s;super(t.texture),this.isProjectile=!1,this.mainId=t.mainId,this.radius=t.radius,this.mainX=t.mainX,this.mainY=t.mainY,this.vx=t.vx,this.vy=t.vy,this.minDelta=null!==(e=t.minDelta)&&void 0!==e?e:.05,this.dt=null!==(i=t.dt)&&void 0!==i?i:.1,this.tint=16777215,this.alpha=null!==(s=t.alpha)&&void 0!==s?s:1,this.scale.set(2*t.radius/t.texture.width,2*t.radius/t.texture.height)}update(t){const e=this.dt;this.mainX+=this.vx,this.mainY+=this.vy,(0,r.logProjectileTrail)(`main(${this.mainX}, ${this.mainY}) cur(${this.x}, ${this.y})`);const i=Math.abs(this.x-this.mainX),s=Math.abs(this.y-this.mainY);(0,r.logProjectileTrail)("dt",e,"dx",i,"dy",s,"mind",this.minDelta),i>this.minDelta?((0,r.logProjectileTrail)("dx * dt",i*e),this.x+=this.vx>0?i*e:-i*e):this.x=this.mainX,s>this.minDelta?((0,r.logProjectileTrail)("dy * dt",s*e),this.y+=this.vy>0?s*e:-s*e):this.y=this.mainY}isOutOfViewport({left:t,top:e,right:i,bottom:s}){const r=this.x-this.radius,o=this.y-this.radius,n=this.x+this.radius,a=this.y+this.radius;return n<t||r>i||a<e||o>s}}e.ProjectileTrail=n},3110:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManager=void 0;const s=i(8687),r=i(5473);class o extends s.Container{init(){}handleUpdate(){}handleResize(){}}class n{constructor(){}static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){var t;const e=new s.Application({autoDensity:!0,resolution:null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,width:n.width,height:n.height,resizeTo:window});document.body.appendChild(e.view),r.logApp.enabled&&((0,r.logApp)("window.app initialized!"),window.app=e),n.app=e,n.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",n.resizeDeBounce),n.app.ticker.add(n.updateHandler)}static async changeScene(t){n.app.stage.removeChild(n.currentScene),n.currentScene.destroy(),n.currentScene=t,n.app.stage.addChild(n.currentScene),n.currentScene.init({app:n.app}),n.resizeHandler()}static resizeDeBounce(){n.cancelScheduledResizeHandler(),n.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(n.resizeTimeoutId)}static scheduleResizeHandler(){n.resizeTimeoutId=setTimeout((()=>{n.cancelScheduledResizeHandler(),n.resizeHandler()}),n.resizeTimeout)}static resizeHandler(){n.currentScene.handleResize({viewWidth:n.width,viewHeight:n.height})}static updateHandler(){n.currentScene.handleUpdate(n.app.ticker.deltaMS)}}n.currentScene=new o,n.resizeTimeout=300,e.SceneManager=n},6550:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ScoreBar=void 0;const s=i(8687);class r extends s.Container{constructor(){super(),this.scoreOptions={padding:20,textColor:16777215,textSize:40},this._score=0,this.setup()}get score(){return this._score}setup(){const{scoreOptions:t}=this,e=new s.Text(`Score: ${this._score}`,{fontSize:t.textSize,fill:t.textColor});e.position.set(t.padding,t.padding),this.addChild(e),this.scoreText=e}addScore(t){this._score+=Math.round(t),this.scoreText.text=`Score: ${this._score}`}clearScore(){this._score=0,this.scoreText.text=`Score: ${this._score}`}}e.ScoreBar=r},2250:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ShootingScene=void 0;const r=i(8687),o=s(i(926)),n=i(6550),a=i(4778),h=i(5473),l=i(7067),d=i(9986),c=i(9060),p=i(6879);class u extends r.Container{constructor(t){super(),this.gameEnded=!1,this.elapsedFrames=0,this.ids=0,this.backgroundSettings={color:7829367},this.startGame=()=>{for(this.startModal.visible=!1,this.scoreBar.clearScore();null!=this.projectilesContainer.children[0];)this.projectilesContainer.removeChild(this.projectilesContainer.children[0]);for(;null!=this.enemiesContainer.children[0];)this.enemiesContainer.removeChild(this.enemiesContainer.children[0]);for(;null!=this.particlesContainer.children[0];)this.particlesContainer.removeChild(this.particlesContainer.children[0]);this.gameEnded=!1},this.setup(t),this.draw(t),this.addEventLesteners()}init({app:t}){this.app=t}setup({viewWidth:t,viewHeight:e}){this.background=new r.Graphics,this.addChild(this.background),this.enemiesContainer=new r.ParticleContainer(2e3,{scale:!0,position:!0,tint:!0}),this.addChild(this.enemiesContainer),this.projectilesContainer=new r.ParticleContainer(2e3,{scale:!0,position:!0,tint:!0}),this.addChild(this.projectilesContainer),this.particlesContainer=new r.ParticleContainer(2e3,{scale:!0,position:!0,tint:!0}),this.addChild(this.particlesContainer),this.scoreBar=new n.ScoreBar,this.addChild(this.scoreBar),this.player=new a.Player({radius:30,fillColor:16777215,damage:20,health:100}),this.player.position.set(t/2,e/2),this.addChild(this.player),this.startModal=new p.StartModal({viewWidth:t,viewHeight:e}),this.startModal.visible=!1,this.addChild(this.startModal)}draw({viewWidth:t,viewHeight:e}){this.background.beginFill(this.backgroundSettings.color),this.background.drawRect(0,0,t,e),this.background.endFill()}handleResize(t){this.centerPlayer(t),this.resizeBackground(t),this.centerModal(t)}centerPlayer({viewWidth:t,viewHeight:e}){this.player.x=t/2,this.player.y=e/2}centerModal({viewWidth:t,viewHeight:e}){this.startModal.position.set(t/2-this.startModal.boxOptions.width/2,e/2-this.startModal.boxOptions.height/2)}resizeBackground({viewWidth:t,viewHeight:e}){(0,h.logLayout)(`bgw=${this.background.width} bgh=${this.background.height} vw=${t} vh=${e}`),this.background.width=t,this.background.height=e}handleUpdate(t){if(this.gameEnded)return;this.elapsedFrames+=1;const{x:e,y:i,width:s,height:r}=this,n=e,a=i,l=e+s,d=i+r;for(const t of this.particlesContainer.children){const e=t;e.update(),e.alpha<=0?(this.particlesContainer.removeChild(e),(0,h.logParticle)(`Removed particle alpha (${this.particlesContainer.children.length})`)):e.isOutOfViewport({left:n,top:a,right:l,bottom:d})&&(this.particlesContainer.removeChild(e),(0,h.logParticle)(`Removed particle out of viewport (${this.particlesContainer.children.length})`))}for(const t of this.enemiesContainer.children){const e=t;e.update(),e.isOutOfViewport({left:n,top:a,right:l,bottom:d})&&(this.enemiesContainer.removeChild(e),(0,h.logEnemy)(`Removed enemy out of viewport (${this.enemiesContainer.children.length})`))}for(const e of this.projectilesContainer.children){const i=e;i.update(t),i.isOutOfViewport({left:n,top:a,right:l,bottom:d})&&(this.projectilesContainer.removeChild(i),(0,h.logProjectile)(`Removed projectile out of viewport (${this.projectilesContainer.children.length})`))}const p=[];for(const t of this.enemiesContainer.children){const e=t;if(Math.hypot(this.player.x-e.x,this.player.y-e.y)-e.radius-this.player.radius<0){this.endGame();break}for(const t of this.projectilesContainer.children){const i=t;if(i.isProjectile&&Math.hypot(i.x-e.x,i.y-e.y)-e.radius-i.radius<0){this.projectilesContainer.removeChild(i),(0,h.logProjectile)(`Removed projectile hit emeny (${this.projectilesContainer.children.length})`),p.push(i.id),this.scoreBar.addScore(100);for(let t=0;t<3*e.radius;t++){const t=Math.atan2(i.y-e.y,i.x-e.x),s=Math.cos(t)*e.radius+e.x,r=Math.sin(t)*e.radius+e.y,o=10*(Math.random()-.5),n=10*(Math.random()-.5),a=new c.Particle({app:this.app,radius:2,vx:o,vy:n,fillColor:e.tintValue});a.position.set(s,r),this.particlesContainer.addChild(a)}e.radius=e.radius-i.radius,e.radius<=5?(this.enemiesContainer.removeChild(e),(0,h.logEnemy)(`Removed enemy killed (${this.enemiesContainer.children.length})`)):(this.scoreBar.addScore(i.radius),o.default.to(e,{width:2*e.radius,height:2*e.radius}))}}}if(p.length>0){let t=-1,e=-1;this.projectilesContainer.children.forEach(((i,s)=>{const r=i;!r.isProjectile&&p.includes(r.mainId)&&(-1===t&&(t=s),e=s)})),t>-1&&e>-1&&(this.projectilesContainer.removeChildren(t,e),(0,h.logProjectileTrail)(`Removed projectile trails [${t}:${e}]`))}this.elapsedFrames%60==0&&this.spawnEnemies()}addEventLesteners(){this.interactive=!0,this.on("pointertap",this.handlePointerTap),this.startModal.on("click",this.startGame)}removeEventListeners(){this.interactive=!1,this.off("pointertap",this.handlePointerTap),this.startModal.off("click",this.startGame)}handlePointerTap(t){if(this.gameEnded)return;const e=this.toLocal(t.global);(0,h.logPointerEvent)(`${t.type} px=${e.x} py=${e.y}`);const i=e.y-this.player.y,s=e.x-this.player.x,r=Math.atan2(i,s);(0,h.logPointerEvent)(`angle=${r} diffY=${i} diffX=${s} relVelocityFactor=1`);const o=5+15*Math.random(),n=1*Math.cos(r)*20,a=1*Math.sin(r)*20,d=new l.Projectile({id:++this.ids,app:this.app,radius:o,fillColor:16777215,vx:n,vy:a});d.anchor.set(.5,.5),d.position.set(this.player.x,this.player.y),this.projectilesContainer.addChild(d);const c=d.BuildTrail();(0,h.logProjectileTrail)(`Trail projectiles (${c.length})`),c.forEach((t=>{t.anchor.set(.5,.5),t.position.set(this.player.x,this.player.y),this.projectilesContainer.addChild(t)})),(0,h.logProjectile)(`Added (${this.projectilesContainer.children.length})`)}spawnEnemies(){const t=Math.floor(15+16*Math.random()),{width:e,height:i}=this.background;let s=0,r=0;switch(1+Math.round(3*Math.random())){case 1:s=e+t,r=Math.random()*i;break;case 2:s=Math.random()*e,r=0-t;break;case 3:s=0-t,r=Math.random()*i;break;case 4:s=Math.random()*e,r=i+t}const o=1+Math.round(2*Math.random()),n=Math.atan2(this.player.y-r,this.player.x-s),a=Math.cos(n)*o,h=Math.sin(n)*o,l=new d.Enemy({app:this.app,radius:t,vx:a,vy:h});l.anchor.set(.5,.5),l.position.set(s,r),this.enemiesContainer.addChild(l)}endGame(){this.gameEnded=!0,this.startModal.scoreText.text=this.scoreBar.score,this.startModal.visible=!0}}e.ShootingScene=u},6879:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StartModal=void 0;const s=i(8687);class r extends s.Container{constructor(t){super(),this.boxOptions={fill:16777215,width:300,height:200,borderRadius:5},this.scoreOptions={top:-50,textColor:0,textSize:40,fontWeight:"bold"},this.pointsOptions={top:-10,textColor:0,textSize:20},this.buttonOptions={top:120,left:50,width:200,height:50,fill:959977,borderRadius:10},this.buttonTextOptions={top:95,textColor:16777215,textSize:20},this.setup(t),this.draw(t),this.setupEventListeners()}setup(t){this.modalBox=new s.Graphics,this.addChild(this.modalBox);const{boxOptions:e,scoreOptions:i,pointsOptions:r,buttonTextOptions:o}=this;this.scoreText=new s.Text("0",{fontSize:i.textSize,fill:i.textColor,fontWeight:i.fontWeight}),this.scoreText.anchor.set(.5,.5),this.scoreText.position.set(e.width/2,e.height/2+i.top),this.addChild(this.scoreText),this.pointsText=new s.Text("Points",{fontSize:r.textSize,fill:r.textColor}),this.pointsText.anchor.set(.5,.5),this.pointsText.position.set(e.width/2,e.height/2+r.top),this.addChild(this.pointsText),this.button=new s.Graphics,this.button.interactive=!0,this.button.cursor="pointer",this.addChild(this.button),this.buttonText=new s.Text("Start Game",{fontSize:o.textSize,fill:o.textColor}),this.buttonText.anchor.set(.5,.5),this.buttonText.position.set(e.width/2,e.height/2/2+o.top),this.button.addChild(this.buttonText)}draw(t){const{boxOptions:e,buttonOptions:i}=this;this.modalBox.beginFill(e.fill),this.modalBox.drawRoundedRect(0,0,e.width,e.height,e.borderRadius),this.modalBox.endFill(),this.button.beginFill(i.fill),this.button.drawRoundedRect(i.left,i.top,i.width,i.height,i.borderRadius),this.button.endFill()}setupEventListeners(){this.button.on("pointertap",(t=>{this.emit("click",t)}))}}e.StartModal=r},6752:(t,e,i)=>{i(7279);const s=i(3110),r=i(2250);(async function(){const t=document.querySelector(".ellipsis");null!=t&&(t.style.display="none"),await s.SceneManager.initialize(),await s.SceneManager.changeScene(new r.ShootingScene({viewWidth:s.SceneManager.width,viewHeight:s.SceneManager.height}))})().catch((t=>{console.error(t);const e=document.createElement("div"),i=document.createElement("div");document.body.prepend(e),document.body.prepend(i),e.style.color="red",e.style.fontSize="2rem",e.innerText=Boolean(t)&&Boolean(t.message)?t.message:t,i.style.color="red",i.style.fontSize="2rem",i.innerText=Boolean(t)&&Boolean(t.stack)?t.stack:""}))},5473:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logProjectileTrail=e.logParticle=e.logEnemy=e.logProjectile=e.logPointerEvent=e.logLayout=e.logApp=void 0;const r=s(i(1227));e.logApp=(0,r.default)("shooting-app"),e.logLayout=(0,r.default)("shooting-layout"),e.logPointerEvent=(0,r.default)("shooting-pointer-event"),e.logProjectile=(0,r.default)("shooting-projectile"),e.logEnemy=(0,r.default)("shooting-enemy"),e.logParticle=(0,r.default)("shooting-particle"),e.logProjectileTrail=(0,r.default)("shooting-projectile-trail")}},i={};function s(t){var r=i[t];if(void 0!==r)return r.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,t=[],s.O=(e,i,r,o)=>{if(!i){var n=1/0;for(d=0;d<t.length;d++){for(var[i,r,o]=t[d],a=!0,h=0;h<i.length;h++)(!1&o||n>=o)&&Object.keys(s.O).every((t=>s.O[t](i[h])))?i.splice(h--,1):(a=!1,o<n&&(n=o));if(a){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,r,o]},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={179:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var r,o,[n,a,h]=i,l=0;if(n.some((e=>0!==t[e]))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(h)var d=h(s)}for(e&&e(i);l<n.length;l++)o=n[l],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(d)},i=self.webpackChunksimple_html5_shooting_game=self.webpackChunksimple_html5_shooting_game||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var r=s.O(void 0,[736],(()=>s(6752)));r=s.O(r)})();